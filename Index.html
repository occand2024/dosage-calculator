<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.4">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!DOCTYPE html&gt;</p>
<p class="p1">&lt;html&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;meta charset="utf-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;meta name="viewport" content="width=device-width"&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;title&gt;JS Bin&lt;/title&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;&lt;!DOCTYPE html&gt;</p>
<p class="p1">&lt;html&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta charset="utf-8" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;title&gt;PPM Calculator&lt;/title&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;a style="position: fixed; top: -1px; right: -1px; padding-top: 5px; padding-right: 10px; padding-bottom: 5px; padding-left: 10px; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(204, 204, 204); color: rgb(51, 51, 51); text-shadow: rgb(255, 255, 255) 0px 1px 1px; border-top-right-radius: 5px; border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(153, 153, 153); border-right-color: rgb(153, 153, 153); border-bottom-color: rgb(153, 153, 153); border-left-color: rgb(153, 153, 153); border-image: initial; text-decoration: none; font-family: 'Helvetica Neue', Arial, Helvetica; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; line-height: normal; -webkit-transition-property: opacity; -webkit-transition-duration: 100ms; -webkit-transition-timing-function: ease-out; -webkit-transition-delay: initial; opacity: 0; background-position: initial initial; background-repeat: initial initial; " href="/evifil/edit"&gt;Edit in jsbin.com&lt;/a&gt;</p>
<p class="p1">&lt;div style="max-width: 400px; margin: 20px auto; font-family: Arial, sans-serif;"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;h2&gt;PPM Dosage Calculator&lt;/h2&gt;</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;label for="targetPpm"&gt;Target Dosage (ppm):&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;input type="number" id="targetPpm" step="any" placeholder="e.g. 10" style="width: 100%; margin-bottom: 10px;" /&gt;</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;label for="percentActive"&gt;% Active (by weight):&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;input type="number" id="percentActive" step="any" placeholder="e.g. 50" style="width: 100%; margin-bottom: 10px;" /&gt;</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;label for="treatedVolumeGal"&gt;Treated Volume (gallons):&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;input type="number" id="treatedVolumeGal" step="any" placeholder="e.g. 1000" style="width: 100%; margin-bottom: 10px;" /&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;label for="specificGravity"&gt;Specific Gravity:&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;input type="number" id="specificGravity" step="any" placeholder="e.g. 1.05" style="width: 100%; margin-bottom: 10px;" /&gt;</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;button id="calculateBtn" style="width: 100%; margin-bottom: 10px;"&gt;Calculate&lt;/button&gt;</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div id="results" style="font-weight: bold; text-align: center;"&gt;&lt;/div&gt;</p>
<p class="p1">&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;script&gt;</p>
<p class="p1">(function() {</p>
<p class="p1"><span class="Apple-converted-space">    </span>// Once the page loads, attach the event listener to the button</p>
<p class="p1"><span class="Apple-converted-space">    </span>document.addEventListener('DOMContentLoaded', function() {</p>
<p class="p1"><span class="Apple-converted-space">        </span>document.getElementById('calculateBtn').addEventListener('click', calculateResults);</p>
<p class="p1"><span class="Apple-converted-space">    </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function calculateResults() {</p>
<p class="p1"><span class="Apple-converted-space">        </span>// Gather inputs</p>
<p class="p1"><span class="Apple-converted-space">        </span>var ppm = parseFloat(document.getElementById('targetPpm').value);</p>
<p class="p1"><span class="Apple-converted-space">        </span>var percentActive = parseFloat(document.getElementById('percentActive').value);</p>
<p class="p1"><span class="Apple-converted-space">        </span>var volumeGal = parseFloat(document.getElementById('treatedVolumeGal').value);</p>
<p class="p1"><span class="Apple-converted-space">        </span>var specGrav = parseFloat(document.getElementById('specificGravity').value);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Reference to results div</p>
<p class="p1"><span class="Apple-converted-space">        </span>var resultsDiv = document.getElementById('results');</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Basic validation</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (</p>
<p class="p1"><span class="Apple-converted-space">            </span>isNaN(ppm) || ppm &lt;= 0 ||</p>
<p class="p1"><span class="Apple-converted-space">            </span>isNaN(percentActive) || percentActive &lt;= 0 || percentActive &gt; 100 ||</p>
<p class="p1"><span class="Apple-converted-space">            </span>isNaN(volumeGal) || volumeGal &lt;= 0 ||</p>
<p class="p1"><span class="Apple-converted-space">            </span>isNaN(specGrav) || specGrav &lt;= 0</p>
<p class="p1"><span class="Apple-converted-space">        </span>) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>resultsDiv.textContent = "Please enter valid positive numbers (and % Active &lt;= 100).";</p>
<p class="p1"><span class="Apple-converted-space">            </span>return;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// 1) Calculate total mg of active needed</p>
<p class="p1"><span class="Apple-converted-space">        </span>//<span class="Apple-converted-space">    </span>1 ppm = 1 mg per liter (approx for water),</p>
<p class="p1"><span class="Apple-converted-space">        </span>//<span class="Apple-converted-space">    </span>1 US gallon ~ 3.785411784 liters</p>
<p class="p1"><span class="Apple-converted-space">        </span>var mgActiveNeeded = ppm * volumeGal * 3.785411784;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// 2) Convert mg active -&gt; lbs active</p>
<p class="p1"><span class="Apple-converted-space">        </span>//<span class="Apple-converted-space">    </span>1 lb = 453592.37 mg</p>
<p class="p1"><span class="Apple-converted-space">        </span>var lbsActiveNeeded = mgActiveNeeded / 453592.37;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// 3) % Active means fractionActive = percentActive / 100</p>
<p class="p1"><span class="Apple-converted-space">        </span>var fractionActive = percentActive / 100;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>//<span class="Apple-converted-space">    </span>Weight of total solution needed (lbs)</p>
<p class="p1"><span class="Apple-converted-space">        </span>var lbsSolution = lbsActiveNeeded / fractionActive;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// 4) Volume of solution in gallons</p>
<p class="p1"><span class="Apple-converted-space">        </span>//<span class="Apple-converted-space">    </span>Water is ~8.34 lb/gal, so solution is 8.34 * specGrav lb/gal</p>
<p class="p1"><span class="Apple-converted-space">        </span>//<span class="Apple-converted-space">    </span>volume_solutions_gal = (total lbs) / (8.34 * specGrav)</p>
<p class="p1"><span class="Apple-converted-space">        </span>var volumeSolutionGal = lbsSolution / (8.34 * specGrav);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// 5) Convert gallons to fluid ounces</p>
<p class="p1"><span class="Apple-converted-space">        </span>//<span class="Apple-converted-space">    </span>1 gallon = 128 fl oz</p>
<p class="p1"><span class="Apple-converted-space">        </span>var volumeSolutionFlOz = volumeSolutionGal * 128;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Round results a bit for display</p>
<p class="p1"><span class="Apple-converted-space">        </span>var volOzRounded = volumeSolutionFlOz.toFixed(2);</p>
<p class="p1"><span class="Apple-converted-space">        </span>var wtSolRounded = lbsSolution.toFixed(3);</p>
<p class="p1"><span class="Apple-converted-space">        </span>var wtActiveRounded = lbsActiveNeeded.toFixed(3);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Display</p>
<p class="p1"><span class="Apple-converted-space">        </span>resultsDiv.innerHTML =<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>"Volume of Solution (fl oz): " + volOzRounded + "&lt;br/&gt;" +</p>
<p class="p1"><span class="Apple-converted-space">            </span>"Weight of Solution (lbs): " + wtSolRounded + "&lt;br/&gt;" +</p>
<p class="p1"><span class="Apple-converted-space">            </span>"Weight of Active Chemical (lbs): " + wtActiveRounded;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1">})();</p>
<p class="p1">&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
